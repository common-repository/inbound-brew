!function(window,document,undefined){var factory=function($,DataTable){"use strict";$.fn.dataTableExt.oApi.fnColResize=function(oSettings,iCol){!!$.fn.dataTable.Api;$(oSettings.oInstance).trigger("column-resize",[oSettings,{iCol:iCol}])};var ColResize=function(dt,opts){var oDTSettings;return $.fn.dataTable.Api?oDTSettings=new $.fn.dataTable.Api(dt).settings()[0]:dt.fnSettings?oDTSettings=dt.fnSettings():"string"==typeof dt?$.fn.dataTable.fnIsDataTable($(dt)[0])&&(oDTSettings=$(dt).eq(0).dataTable().fnSettings()):dt.nodeName&&"table"===dt.nodeName.toLowerCase()?$.fn.dataTable.fnIsDataTable(dt.nodeName)&&(oDTSettings=$(dt.nodeName).dataTable().fnSettings()):dt instanceof jQuery?$.fn.dataTable.fnIsDataTable(dt[0])&&(oDTSettings=dt.eq(0).dataTable().fnSettings()):oDTSettings=dt,$.fn.dataTable.camelToHungarian&&$.fn.dataTable.camelToHungarian(ColResize.defaults,opts||{}),this.s={dt:null,init:$.extend(!0,{},ColResize.defaults,opts),mouse:{startX:-1,startY:-1,targetIndex:-1,targetColumn:-1,neighbourIndex:-1,neighbourColumn:-1},isMousedown:!1},this.dom={resizeCol:null,resizeColNeighbour:null,restoreEvents:[]},this.s.dt=oDTSettings.oInstance.fnSettings(),this.s.dt._colResize=this,this._fnConstruct(),oDTSettings.oApi._fnCallbackReg(oDTSettings,"aoDestroyCallback",$.proxy(this._fnDestroy,this),"ColResize"),this};return ColResize.prototype={fnReset:function(){for(var i=0,iLen=this.s.dt.aoColumns.length;i<iLen;i++)this.s.dt.aoColumns[i].width=this.s.dt.aoColumns[i]._ColResize_iOrigWidth;return this.s.dt.adjust().draw(),this},_fnConstruct:function(){var i,that=this,iLen=that.s.dt.aoColumns.length;for(that._fnSetupMouseListeners(),i=0;i<iLen;i++)this.s.dt.aoColumns[i]._ColResize_iOrigWidth=this.s.dt.aoColumns[i].width;this._fnSetColumnIndexes(),this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(oS,oData){that._fnStateSave.call(that,oData)},"ColResize_State"),this._fnStateLoad()},_fnStateSave:function(oState){this.s.dt.aoColumns.forEach(function(col,index){oState.columns[index].width=col.sWidthOrig})},_fnStateLoad:function(){var that=this,loadedState=this.s.dt.oLoadedState;if(loadedState&&loadedState.columns){var colStates=loadedState.columns,currCols=this.s.dt.aoColumns;colStates.length>0&&colStates.length===currCols.length&&colStates.forEach(function(state,index){var col=that.s.dt.aoColumns[index];state.width&&(col.sWidthOrig=col.sWidth=state.width)})}},_fnDelayEvents:function(until,obj,type,namespace){var that=this,events=$._data($(obj).get(0),"events");$.each(events,function(i,o){i==type&&$.each(o,function(k,v){v&&(namespace?(that.dom.restoreEvents.push({until:until,obj:obj,type:v.type,namespace:v.namespace,handler:v.handler}),v.namespace==namespace&&$(obj).off(type+"."+namespace)):(that.dom.restoreEvents.push({until:until,obj:obj,type:v.type,namespace:null,handler:v.handler}),$(obj).off(type)))})})},_fnRestoreEvents:function(until){var i,that=this;for(i=that.dom.restoreEvents.length;i--;)that.dom.restoreEvents[i].until!=undefined&&null!=that.dom.restoreEvents[i].until&&that.dom.restoreEvents[i].until!=until||(that.dom.restoreEvents[i].namespace?($(that.dom.restoreEvents[i].obj).off(that.dom.restoreEvents[i].type+"."+that.dom.restoreEvents[i].namespace).on(that.dom.restoreEvents[i].type+"."+that.dom.restoreEvents[i].namespace,that.dom.restoreEvents[i].handler),that.dom.restoreEvents.splice(i,1)):($(that.dom.restoreEvents[i].obj).off(that.dom.restoreEvents[i].type).on(that.dom.restoreEvents[i].type,that.dom.restoreEvents[i].handler),that.dom.restoreEvents.splice(i,1)))},_fnSetupMouseListeners:function(){var that=this;$(that.s.dt.nTableWrapper).off("mouseenter.ColResize").on("mouseenter.ColResize","th",function(e){e.preventDefault(),that._fnMouseEnter.call(that,e,this)}),$(that.s.dt.nTableWrapper).off("mouseleave.ColResize").on("mouseleave.ColResize","th",function(e){e.preventDefault(),that._fnMouseLeave.call(that,e,this)})},_fnMouseListener:function(i,nTh){var that=this;$(nTh).off("mouseenter.ColResize").on("mouseenter.ColResize",function(e){e.preventDefault(),that._fnMouseEnter.call(that,e,nTh)}),$(nTh).off("mouseleave.ColResize").on("mouseleave.ColResize",function(e){e.preventDefault(),that._fnMouseLeave.call(that,e,nTh)})},_fnMouseEnter:function(e,nTh){var that=this;that.s.isMousedown||$(nTh).off("mousemove.ColResizeHandle").on("mousemove.ColResizeHandle",function(e){e.preventDefault(),that._fnResizeHandleCheck.call(that,e,nTh)})},_fnMouseLeave:function(e,nTh){$(nTh).off("mousemove.ColResizeHandle")},_fnMouseDown:function(e,nTh){var that=this;that.s.isMousedown=!0;var target=$(e.target).closest("th, td");target.offset();this.s.mouse.startX=e.pageX,this.s.mouse.startY=e.pageY;var idx=that.dom.resizeCol[0].cellIndex;if(that.dom.resizeColNeighbour[0]===undefined)var idxNeighbour=0;else var idxNeighbour=that.dom.resizeColNeighbour[0].cellIndex;idx!==undefined&&(this.s.mouse.targetIndex=idx,this.s.mouse.targetColumn=this.s.dt.aoColumns[idx],this.s.mouse.neighbourIndex=idxNeighbour,this.s.mouse.neighbourColumn=this.s.dt.aoColumns[idxNeighbour],$(document).off("mousemove.ColResize").on("mousemove.ColResize",function(e){that._fnMouseMove.call(that,e)}).off("mouseup.ColResize").on("mouseup.ColResize",function(e){that._fnMouseUp.call(that,e)}))},_fnMouseMove:function(e){var that=this,offset=$(that.s.mouse.targetColumn.nTh).offset(),relativeX=e.pageX-offset.left,distFromRight=$(that.s.mouse.targetColumn.nTh).outerWidth()-relativeX-1,dx=e.pageX-that.s.mouse.startX,minColumnWidth=Math.max(parseInt($(that.s.mouse.targetColumn.nTh).css("min-width")),10),prevWidth=$(that.s.mouse.targetColumn.nTh).width();if(dx>0&&distFromRight<=0||dx<0&&distFromRight>=0)if(that.s.init.tableWidthFixed){if(that.s.mouse.neighbourColumn){var minColumnNeighbourWidth=Math.max(parseInt($(that.s.mouse.neighbourColumn.nTh).css("min-width")),10),prevNeighbourWidth=$(that.s.mouse.neighbourColumn.nTh).width(),newColWidth=Math.max(minColumnWidth,prevWidth+dx),newColNeighbourWidth=Math.max(minColumnNeighbourWidth,prevNeighbourWidth-dx),widthDiff=newColWidth-prevWidth,colResizeIdx=parseInt(that.dom.resizeCol.attr("data-column-index")),neighbourColResizeIdx=parseInt(that.dom.resizeColNeighbour.attr("data-column-index"));that.s.mouse.neighbourColumn.sWidthOrig=that.s.mouse.neighbourColumn.sWidth=that.s.mouse.neighbourColumn.width=newColNeighbourWidth+"px",that.s.mouse.targetColumn.sWidthOrig=that.s.mouse.targetColumn.sWidth=that.s.mouse.targetColumn.width=newColWidth+"px";var domNeighbourCols=$(that.s.dt.nTableWrapper).find("th[data-column-index='"+neighbourColResizeIdx+"']"),domCols=$(that.s.dt.nTableWrapper).find("th[data-column-index='"+colResizeIdx+"']");dx>0?(domNeighbourCols.width(that.s.mouse.neighbourColumn.width),domCols.width(that.s.mouse.targetColumn.width)):(domCols.width(that.s.mouse.targetColumn.width),domNeighbourCols.width(that.s.mouse.neighbourColumn.width))}}else{var newColWidth=Math.max(minColumnWidth,prevWidth+dx),widthDiff=newColWidth-prevWidth,colResizeIdx=parseInt(that.dom.resizeCol.attr("data-column-index"));that.s.mouse.targetColumn.sWidthOrig=that.s.mouse.targetColumn.sWidth=that.s.mouse.targetColumn.width=newColWidth+"px";var domCols=$(that.s.dt.nTableWrapper).find("th[data-column-index='"+colResizeIdx+"']");domCols.parents("table").each(function(){if($(this).parent().hasClass("DTFC_LeftBodyLiner")){var newWidth=$(that.s.dt.nTableWrapper).find(".DTFC_LeftHeadWrapper").children("table").width();$(this).parents(".DTFC_LeftWrapper").width(newWidth),$(this).parent().width(newWidth+15),$(this).width(newWidth)}else{var newWidth=$(this).width()+widthDiff;$(this).width(newWidth)}}),domCols.width(that.s.mouse.targetColumn.width)}that.s.mouse.startX=e.pageX},_fnResizeHandleCheck:function(e,nTh){var that=this,offset=$(nTh).offset(),relativeX=e.pageX-offset.left,distFromLeft=(e.pageY-offset.top,relativeX),distFromRight=$(nTh).outerWidth()-relativeX-1,handleBuffer=this.s.init.handleWidth/2,leftHandleOn=distFromLeft<handleBuffer,rightHandleOn=distFromRight<handleBuffer;0==$(nTh).prev("th").length&&(this.s.init.rtl?rightHandleOn=!1:leftHandleOn=!1),0==$(nTh).next("th").length&&this.s.init.tableWidthFixed&&(this.s.init.rtl?leftHandleOn=!1:rightHandleOn=!1);var resizeAvailable=leftHandleOn||rightHandleOn;that.s.init.rtl?leftHandleOn?(that.dom.resizeCol=$(nTh),that.dom.resizeColNeighbour=$(nTh).next()):rightHandleOn&&(that.dom.resizeCol=$(nTh).prev(),that.dom.resizeColNeighbour=$(nTh)):rightHandleOn?(that.dom.resizeCol=$(nTh),that.dom.resizeColNeighbour=$(nTh).next()):leftHandleOn&&(that.dom.resizeCol=$(nTh).prev(),that.dom.resizeColNeighbour=$(nTh)),resizeAvailable&=this.s.init.tableWidthFixed?this.s.init.exclude.indexOf(parseInt($(that.dom.resizeCol).attr("data-column-index")))==-1&&this.s.init.exclude.indexOf(parseInt($(that.dom.resizeColNeighbour).attr("data-column-index")))==-1:this.s.init.exclude.indexOf(parseInt($(that.dom.resizeCol).attr("data-column-index")))==-1,$(nTh).off("mousedown.ColResize"),resizeAvailable?($(nTh).css("cursor","ew-resize"),that._fnDelayEvents(null,nTh,"mousedown","ColReorder"),that._fnDelayEvents("click",nTh,"click","DT"),$(nTh).off("mousedown.ColResize").on("mousedown.ColResize",function(e){e.preventDefault(),that._fnMouseDown.call(that,e,nTh)}).off("click.ColResize").on("click.ColResize",function(e){that._fnClick.call(that,e)})):($(nTh).css("cursor","pointer"),$(nTh).off("mousedown.ColResize click.ColResize"),that._fnRestoreEvents(),that.s.isMousedown||this._fnRestoreEvents("click"))},_fnClick:function(e){var that=this;that.s.isMousedown=!1,e.stopImmediatePropagation()},_fnMouseUp:function(e){var that=this;that.s.isMousedown=!1,that.s.mouse.targetColumn.width=that.dom.resizeCol.width(),$(document).off("mousemove.ColResize mouseup.ColResize"),this.s.dt.oInstance.fnAdjustColumnSizing();var LeftWrapper=$(that.s.dt.nTableWrapper).find(".DTFC_LeftWrapper"),DTFC_LeftWidth=LeftWrapper.width();LeftWrapper.children(".DTFC_LeftHeadWrapper").children("table").width(DTFC_LeftWidth),that.s.init.resizeCallback&&that.s.init.resizeCallback.call(that,that.s.mouse.targetColumn)},_fnDestroy:function(){var i,iLen;for(i=0,iLen=this.s.dt.aoDrawCallback.length;i<iLen;i++)if("ColResize_Pre"===this.s.dt.aoDrawCallback[i].sName){this.s.dt.aoDrawCallback.splice(i,1);break}$(this.s.dt.nTHead).find("*").off(".ColResize"),$.each(this.s.dt.aoColumns,function(i,column){$(column.nTh).removeAttr("data-column-index")}),this.s.dt._colResize=null,this.s=null},_fnSetColumnIndexes:function(){$.each(this.s.dt.aoColumns,function(i,column){$(column.nTh).attr("data-column-index",i)})}},ColResize.defaults={resizeCallback:null,exclude:[],tableWidthFixed:!0,handleWidth:10,rtl:!1},ColResize.version="0.0.10",$.fn.dataTable.ColResize=ColResize,$.fn.DataTable.ColResize=ColResize,"function"==typeof $.fn.dataTable&&"function"==typeof $.fn.dataTableExt.fnVersionCheck&&$.fn.dataTableExt.fnVersionCheck("1.9.3")?$.fn.dataTableExt.aoFeatures.push({fnInit:function(settings){var table=settings.oInstance;if(settings._colResize)table.oApi._fnLog(settings,1,"ColResize attempted to initialise twice. Ignoring second");else{var dtInit=settings.oInit,opts=dtInit.colResize||dtInit.oColResize||{};new ColResize(settings,opts)}return null},cFeature:"Z",sFeature:"ColResize"}):alert("Warning: ColResize requires DataTables 1.9.3 or greater - www.datatables.net/download"),$.fn.dataTable.Api&&$.fn.dataTable.Api.register("colResize.reset()",function(){return this.iterator("table",function(ctx){ctx._colResize.fnReset()})}),ColResize};"function"==typeof define&&define.amd?define(["jquery","datatables"],factory):"object"==typeof exports?factory(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.ColResize&&factory(jQuery,jQuery.fn.dataTable)}(window,document);