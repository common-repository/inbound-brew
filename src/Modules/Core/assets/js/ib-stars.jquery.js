!function($){$.fn.ib_stars=function(options){var _this,_edit,_save,defaults={stars:5,star_active_class:"starrr",star_inactive_class:"",star_hover_class:"starrr",input_id:"star_rating",input_name:"star_name",edit_text:"edit",save_text:"save"},_hoverLock=[],methods={init:function(){for(var currentRating=_this.attr("data-rating"),i=1;i<=settings.stars;i++){var _class=currentRating>=i?settings.star_active_class:settings.star_inactive_class,$star=$("<i class='fa fa-star-o "+_class+"' data-rating='"+i+"'></i>");$star.mouseover(function(){methods.handleHover($(this))}).click(function(){var that=$(this).parent("span");methods.handleToggle(that),methods.saveRating(that)}),_this.append($star)}_this.append("&nbsp;"),_edit=$("<span class='ib-link' data-role='edit-rating'>["+settings.edit_text+"]</span>"),_save=$("<span class='ib-link ib-hidden' data-role='save-rating'>["+settings.save_text+"]</span>"),_this.append(_edit,_save),_edit.on("click",function(){var that=$(this).parent("span");methods.handleToggle(that)}),_save.on("click",function(){var that=$(this).parent("span");methods.handleToggle(that),methods.saveRating(that)})},handleHover:function(star){var that=star.parent("span");if(_hoverLock[that.data("id")]===!1){var rating=star.attr("data-rating");that.find("i").each(function(){var $value=$(this).attr("data-rating");$value<=rating?$(this).removeClass(settings.star_active_class).removeClass(settings.star_inactive_class).addClass(settings.star_hover_class):$(this).removeClass(settings.star_active_class).removeClass(settings.star_hover_class).addClass(settings.star_inactive_class)}),that.attr("data-rating",rating)}},saveRating:function(that){var rating=that.attr("data-rating");$.ajax({method:"POST",data:{points:20*rating,lead_id:that.attr("data-id"),action:"update_lead_score"},url:ibAjax.ajaxurl,success:function(data){},error:function(){}})},handleToggle:function(that){_hoverLock[that.data("id")]===!0?_hoverLock[that.data("id")]=!1:_hoverLock[that.data("id")]=!0,that.children(".ib-link").toggle()}},settings=$.extend({},defaults,options);return this.each(function(){_this=$(this),_hoverLock[$(this).data("id")]=!0,methods.init()})}}(jQuery);