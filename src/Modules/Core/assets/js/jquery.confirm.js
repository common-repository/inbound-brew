if("undefined"==typeof jQuery)throw new Error("jquery-confirm requires jQuery");var jconfirm,Jconfirm;!function($){"use strict";$.confirm=function(options){return jconfirm(options)},$.alert=function(options){return options.cancelButton=!1,jconfirm(options)},$.dialog=function(options){return options.cancelButton=!1,options.confirmButton=!1,jconfirm(options)},jconfirm=function(options){jconfirm.defaults&&$.extend(jconfirm.pluginDefaults,jconfirm.defaults);var options=$.extend({},jconfirm.pluginDefaults,options);return new Jconfirm(options)},Jconfirm=function(options){$.extend(this,options),this._init()},Jconfirm.prototype={_init:function(){var that=this;this._rand=Math.round(99999*Math.random()),this._buildHTML(),this._bindEvents(),setTimeout(function(){that.open()},0)},animations:["anim-scale","anim-top","anim-bottom","anim-left","anim-right","anim-zoom","anim-opacity","anim-none","anim-rotate","anim-rotatex","anim-rotatey","anim-scalex","anim-scaley"],_buildHTML:function(){this.animation="anim-"+this.animation.toLowerCase(),"none"===this.animation&&(this.animationSpeed=0),this.$el=$(this.template).appendTo(this.container).addClass(this.theme),this.$el.find(".jconfirm-box-container").addClass(this.columnClass),this.CSS={"-webkit-transition-duration":this.animationSpeed/1e3+"s","transition-duration":this.animationSpeed/1e3+"s","-webkjit-transition-timing-function":"cubic-bezier(0.27, 1.12, 0.32, "+this.animationBounce+")","transition-timing-function":"cubic-bezier(0.27, 1.12, 0.32, "+this.animationBounce+")"},this.$el.find(".jconfirm-bg").css(this.CSS),this.$b=this.$el.find(".jconfirm-box").css(this.CSS).addClass(this.animation),this.setTitle(),this.contentDiv=this.$el.find("div.content"),this.$btnc=this.$el.find(".buttons"),this.confirmButton&&""!==this.confirmButton.trim()&&(this.$confirmButton=$('<button class="btn">'+this.confirmButton+"</button>").appendTo(this.$btnc).addClass(this.confirmButtonClass)),this.cancelButton&&""!==this.cancelButton.trim()&&(this.$cancelButton=$('<button class="btn">'+this.cancelButton+"</button>").appendTo(this.$btnc).addClass(this.cancelButtonClass)),this.confirmButton||this.cancelButton||this.$btnc.remove(),this.confirmButton||this.cancelButton||null!=this.closeIcon||(this.$closeButton=this.$b.find(".closeIcon").show()),this.closeIcon===!0&&(this.$closeButton=this.$b.find(".closeIcon").show()),this.setContent(),this.autoClose&&this._startCountDown()},setTitle:function(string){this.title="undefined"!=typeof string?string:this.title,this.title?this.$el.find("div.title").html('<i class="'+this.icon+'"></i> '+this.title):this.$el.find("div.title").remove()},setContent:function(string){var that=this;this.content=string?string:this.content;var animate=!!string;if("boolean"==typeof this.content)this.content?console.error("Invalid option for property content: passed TRUE"):this.contentDiv.remove();else if("string"==typeof this.content)if("url:"===this.content.substr(0,4).toLowerCase()){this.contentDiv.html(""),this.$btnc.find("button").prop("disabled",!0);var url=this.content.substring(4,this.content.length);$.get(url).done(function(html){that.contentDiv.html(html)}).always(function(data,status,xhr){"function"==typeof that.contentLoaded&&that.contentLoaded(data,status,xhr),that.$btnc.find("button").prop("disabled",!1),that.setDialogCenter()})}else this.contentDiv.html(this.content);else if("function"==typeof this.content){this.contentDiv.html(""),this.$btnc.find("button").attr("disabled","disabled");var promise=this.content(this);"object"!=typeof promise?console.error("The content function must return jquery promise."):"function"!=typeof promise.always?console.error("The object returned is not a jquery promise."):promise.always(function(data,status){that.$btnc.find("button").removeAttr("disabled"),that.setDialogCenter()})}else console.error("Invalid option for property content, passed: "+typeof this.content);this.setDialogCenter(animate)},_startCountDown:function(){var opt=this.autoClose.split("|");if(/cancel/.test(opt[0])&&"alert"===this.type)return!1;if(/confirm|cancel/.test(opt[0])){this.$cd=$('<span class="countdown">').appendTo(this["$"+opt[0]+"Button"]);var that=this;that.$cd.parent().click();var time=opt[1]/1e3;this.interval=setInterval(function(){that.$cd.html(" ["+(time-=1)+"]"),0===time&&(that.$cd.parent().trigger("click"),clearInterval(that.interval))},1e3)}else console.error("Invalid option "+opt[0]+", must be confirm/cancel")},_bindEvents:function(){var that=this;this.$el.find(".jconfirm-scrollpane").click(function(e){that.backgroundDismiss?(that.cancel(),that.close()):(that.$b.addClass("hilight"),setTimeout(function(){that.$b.removeClass("hilight")},400))}),this.$el.find(".jconfirm-box").click(function(e){e.stopPropagation()}),this.$confirmButton&&this.$confirmButton.click(function(e){e.preventDefault();var r=that.confirm(that.$b);that.onAction(),("undefined"==typeof r||r)&&that.close()}),this.$cancelButton&&this.$cancelButton.click(function(e){e.preventDefault();var r=that.cancel(that.$b);that.onAction(),("undefined"==typeof r||r)&&that.close()}),this.$closeButton&&this.$closeButton.click(function(e){e.preventDefault(),that.cancel(),that.onAction(),that.close()}),this.keyboardEnabled&&setTimeout(function(){$(window).on("keyup."+this._rand,function(e){that.reactOnKey(e)})},500),$(window).on("resize."+this._rand,function(){that.setDialogCenter(!0)})},reactOnKey:function key(e){var a=$(".jconfirm");if(a.eq(a.length-1)[0]!==this.$el[0])return!1;var key=e.which;if(27===key){if(!this.backgroundDismiss)return this.$el.find(".jconfirm-bg").click(),!1;this.$cancelButton?this.$cancelButton.click():this.close()}13!==key&&32!=key||this.$confirmButton&&this.$confirmButton.click()},setDialogCenter:function(animate){var windowHeight=$(window).height(),boxHeight=this.$b.outerHeight(),topMargin=(windowHeight-boxHeight)/2,minMargin=100;if(boxHeight>windowHeight-minMargin)var style={"margin-top":minMargin/2,"margin-bottom":minMargin/2};else var style={"margin-top":topMargin};animate?this.$b.animate(style,{duration:this.animationSpeed,queue:!1}):this.$b.css(style)},close:function(){var that=this;return!this.isClosed()&&("function"==typeof this.onClose&&this.onClose(),$(window).unbind("resize."+this._rand),this.keyboardEnabled&&$(window).unbind("keyup."+this._rand),that.$el.find(".jconfirm-bg").removeClass("seen"),this.$b.addClass(this.animation),setTimeout(function(){that.$el.remove()},this.animationSpeed+10),jconfirm.record.closed+=1,jconfirm.record.currentlyOpen-=1,jconfirm.record.currentlyOpen<1&&$("body").removeClass("jconfirm-noscroll"),!0)},open:function(){var that=this;return!this.isClosed()&&(that.$el.find(".jconfirm-bg").addClass("seen"),$("body").addClass("jconfirm-noscroll"),this.$b.removeClass(this.animations.join(" ")),$("body :focus").trigger("blur"),this.$b.find("input[autofocus]:visible:first").focus(),jconfirm.record.opened+=1,jconfirm.record.currentlyOpen+=1,"function"==typeof this.onOpen&&this.onOpen(),!0)},isClosed:function(){return""===this.$el.css("display")}},jconfirm.pluginDefaults={template:'<div class="jconfirm"><div class="jconfirm-bg"></div><div class="jconfirm-scrollpane"><div class="container"><div class="jrow"><div class="jconfirm-box-container span6 offset3"><div class="jconfirm-box"><div class="closeIcon"><span class="glyphicon glyphicon-remove"></span></div><div class="title"></div><div class="content"></div><div class="buttons"></div><div class="jquery-clear"></div></div></div></div></div></div></div>',title:"Hello",content:"Are you sure to continue?",contentLoaded:function(){},icon:"",confirmButton:"Okay",cancelButton:"Cancel",confirmButtonClass:"btn-default",cancelButtonClass:"btn-default",theme:"white",animation:"scale",animationSpeed:400,animationBounce:1.5,keyboardEnabled:!1,container:"body",confirm:function(){},cancel:function(){},backgroundDismiss:!0,autoClose:!1,closeIcon:null,columnClass:"col-md-6 col-md-offset-3",onOpen:function(){},onClose:function(){},onAction:function(){}},jconfirm.record={opened:0,closed:0,currentlyOpen:0}}(jQuery);