jQuery(document).ready(function(){jQuery("#IbStartDate").datepicker({maxDate:new Date,onSelect:function(selected){jQuery("#IbEndDate").datepicker("option","minDate",selected)}}),jQuery("#IbEndDate").datepicker({maxDate:new Date,onSelect:function(selected){jQuery("#IbStartDate").datepicker("option","maxDate",selected)}}),jQuery("body").on("click",".filter-with-social-media li",function(){jQuery(".filter-with-social-media li").removeClass("active"),jQuery(".social-data").removeClass("active"),jQuery(this).addClass("active"),jQuery("."+jQuery(this).data("active")).addClass("active")}),jQuery(".ib_reports-filter-form").on("submit",function(e){e.preventDefault();var $form=jQuery(this),start_date=jQuery("#IbStartDate").val(),end_date=jQuery("#IbEndDate").val();jQuery.ajax({data:{action:"ib_reports_filter",start_date:start_date,end_date:end_date},type:"post",url:$form.attr("action"),success:function(data){var social_data=JSON.parse(data);jQuery(".ib-data-contain").replaceWith(social_data.data),jQuery("#IbEndDate").val()?jQuery(".data-left").html(jQuery("#IbStartDate").val()+" To "+jQuery("#IbEndDate").val()):jQuery(".data-left").html(jQuery("#IbStartDate").val()+" To Present");var config_new={type:"line",data:{labels:social_data.graph_label,datasets:[{label:"Google Unique Sessions",fill:!1,backgroundColor:"rgb(221,75,57)",borderColor:"rgb(221,75,57)",data:social_data.google_value},{label:"Facebook Impressions",backgroundColor:"rgb(59,89,152)",borderColor:"rgb(59,89,152)",data:social_data.facebook_value,fill:!1},{label:"Twitter Interactions",fill:!1,backgroundColor:"rgb(85,172,238)",borderColor:"rgb(85,172,238)",data:social_data.twitter_value},{label:"LinkedIn Impressions",fill:!1,backgroundColor:"#f57722",borderColor:"#f57722",data:social_data.linkedin_value},{label:"Leads",fill:!1,backgroundColor:"#0073aa",borderColor:"#0073aa",data:social_data.ib_value}]},options:{responsive:!0,title:{display:!1,text:""},tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0},scales:{xAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Date"}}],yAxes:[{display:!0,scaleLabel:{display:!0,labelString:"Value"}}]}}},ctx_new=document.getElementById("canvas").getContext("2d");window.myLine=new Chart(ctx_new,config_new),jQuery(".facebook-data-icon").on("click",function(){window.myLine.config.data.datasets=[{label:"Facebook Impressions",backgroundColor:"rgb(59,89,152)",borderColor:"rgb(59,89,152)",data:social_data.facebook_value,fill:!1}],window.myLine.update()}),jQuery(".linkedin-data-icon").on("click",function(){window.myLine.config.data.datasets=[{label:"LinkedIn Impressions",fill:!1,backgroundColor:"#f57722",borderColor:"#f57722",data:social_data.linkedin_value}],window.myLine.update()}),jQuery(".twitter-data-icon").on("click",function(){window.myLine.config.data.datasets=[{label:"Twitter Interactions",fill:!1,backgroundColor:"rgb(85,172,238)",borderColor:"rgb(85,172,238)",data:social_data.twitter_value}],window.myLine.update()}),jQuery(".google-data-icon").on("click",function(){window.myLine.config.data.datasets=[{label:"Google Unique Sessions",fill:!1,backgroundColor:"rgb(221,75,57)",borderColor:"rgb(221,75,57)",data:social_data.google_value}],window.myLine.update()}),jQuery(".ib-data-icon").on("click",function(){window.myLine.config.data.datasets=[{label:"Lead",fill:!1,backgroundColor:"rgb(0, 115, 170)",borderColor:"rgb(0, 115, 170)",data:social_data.ib_value}],window.myLine.update()}),jQuery(".global-data-icon").on("click",function(){window.myLine.config.data.datasets=[{label:"Google Unique Sessions",fill:!1,backgroundColor:"rgb(221,75,57)",borderColor:"rgb(221,75,57)",data:social_data.google_value},{label:"Facebook Impressions",backgroundColor:"rgb(59,89,152)",borderColor:"rgb(59,89,152)",data:social_data.facebook_value,fill:!1},{label:"Twitter Interactions",fill:!1,backgroundColor:"rgb(85,172,238)",borderColor:"rgb(85,172,238)",data:social_data.twitter_value},{label:"LinkedIn Impressions",fill:!1,backgroundColor:"#f57722",borderColor:"#f57722",data:social_data.linkedin_value},{label:"Leads",fill:!1,backgroundColor:"#0073aa",borderColor:"#0073aa",data:social_data.ib_value}],window.myLine.update()})}})}),jQuery(".enable-dashboard").on("click",function(e){e.preventDefault(),jQuery(".enable-chart").html("<p>Please wait for few minutes and do not refresh the page until we get data...</p>"),jQuery.ajax({data:{action:"initial_socail_datapoint"},type:"post",url:ibdashboard.ajaxurl,success:function(){location.reload()}})})});