!function($){$.fn.ib_socialSharingWidget=function(options){var _ibThis,_shareWidget,defaults={admin:!0},methods={init:function(){_ibThis.find(".ib_share-widget-networks input").each(function(){$(this).click(function(){methods.handleNetworkClicked($(this))})}),_ibThis.find('input[type="text"]').each(function(){$(this).on("change",function(){methods.handleInputs($(this))})}).keypress(function(e){13==e.which&&(e.preventDefault(),$(this).trigger("change"))}),_ibThis.find("select").each(function(){$(this).on("change",function(){methods.handleInputs($(this))})}),$ibTransforms=_ibThis.find(".ib_cta-transform"),$ibTransforms.each(function(){$(this).click(function(){methods.toggleTextTransforn($(this))})}),_ibThis.find('.ib_icon-style-list input[type="radio"]').each(function(){$(this).on("click",function(){methods.handleInputs($(this))})}),_shareWidget=_ibThis.find(".ib-sharing-widget");var $colorPickers=$(".ib_color-picker");$colorPickers.each(function(){var $me=$(this);$me.after('<span class="ib_color-pick">&nbsp;</span>');var prevColor=$me.val(),$colorPreview=$me.next(".ib_color-pick");prevColor.length&&$colorPreview.css("background-color","#"+prevColor),$colorPreview.click(function(){var $colorPicker=$(this).prev(".ib_color-picker");$colorPicker.prop("disabled")||$colorPicker.trigger("click")}),$me.colpick({layout:"hex",submit:0,colorScheme:"dark",onChange:function(hsb,hex,rgb,el,bySetColor){var $el=$(el);$el.next(".ib_color-pick").css("background-color","#"+hex),$el.val(hex),$el.trigger("change")}})}).keyup(function(){$(this).colpickSetColor(this.value)}),$(".ui-slider").each(function(){$(this).slider({min:$(this).data("min")||0,max:$(this).data("max")||100,value:$(this).data("value")||0,change:function(event,slider){var $slider=$(this),$input=($slider.data("group"),$slider.data("name"),$slider.prev().find("input")),value=$slider.slider("option","value");$input.val(value).trigger("change")}})});for(var group in settings.options)if("options"!=group)for(var prop in settings.options[group])value=settings.options[group][prop],methods.chooseStyleMethod(group,prop,value);_ibThis.find("#widget_submit").click(function(e){e.preventDefault(),methods.saveCurrentSettings()}),$("#widget_title_field").keyup(function(e){methods.updateTitleProperty("text",$(this).val())}).keypress(function(e){13==e.which&&e.preventDefault()})},handleInputs:function($input){methods.chooseStyleMethod($input.data("group"),$input.data("property"),$input.val())},chooseStyleMethod:function(group,property,value){switch(property=property.replace(new RegExp("_","g"),"-"),group){case"title":methods.updateTitleProperty(property,value);break;case"icons":methods.updateIconProperty(property,value);break;case"background":methods.updateBackgroundStyle(property,value)}},toggleTextTransforn:function($button){var property=$button.data("property"),value=$button.data("value");$button.hasClass("ib-active")?($button.removeClass("ib-active"),value=""):$button.addClass("ib-active"),$button.next().val(value),methods.chooseStyleMethod("title",property,value)},saveCurrentSettings:function(){$.ajax({url:ibKwAjax.ajaxurl,dataType:"json",type:"post",data:_ibThis.serialize()+"&nonce="+ibKwAjax.ibKwNonce,success:function(responseText,status){1==responseText.type&&$.alert({title:"Success!",content:responseText.message,confirmButtonClass:"ib_save"})},error:function(jqXhr,textStatus,errorThrown){console.log(errorThrown)}})},updateBackgroundStyle:function(property,value){var properties=[];switch(property=property.replace("_","-")){case"background-color":case"border-color":value="#"+value,properties.push({p:property,v:value});break;case"h-padding":value+="px",properties.push({p:"padding-left",v:value}),properties.push({p:"padding-right",v:value});break;case"v-padding":value+="px",properties.push({p:"padding-top",v:value}),properties.push({p:"padding-bottom",v:value});break;default:value+="px",properties.push({p:property,v:value})}for(var i in properties){var p=properties[i].p,v=properties[i].v;_shareWidget.css(p,v)}},updateIconProperty:function(property,value){property=property.replace("_","-");var $icons=_shareWidget.find("a.ib-network span"),length=$icons.length;switch(property){case"size":$icons.each(function(){$(this).removeClass("fa-1x fa-2x fa-3x fa-4x fa-5x").addClass("fa-"+value+"x")});break;case"margin-bottom":$icons.each(function(index,element){index!=length-1&&$(this).css(property,value+"px")});break;case"type":$icons.each(function(){var $icon=$(this),prefix="fa-"+$icon.attr("data-class");switch(value){case"square":$icon.removeClass(prefix).removeClass(prefix+"-image"),$icon.addClass(prefix+"-square"),methods.toggleIconColors(!0);break;case"image":$icon.removeClass(prefix).removeClass(prefix+"-square"),$icon.addClass(prefix+"-image"),methods.toggleIconColors(!1);break;default:$icon.removeClass(prefix+"-image").removeClass(prefix+"-square"),$icon.addClass(prefix),methods.toggleIconColors(!0)}});default:property=property.replace("-","_"),_shareWidget.find('a.ib-network[data-id="'+property+'"] span').css("color","#"+value)}},toggleIconColors:function(is_on){var $table=$("#share_widget_icon_colors");is_on?($table.css({opacity:1}),$table.find("input").prop("disabled",!1)):($table.css({opacity:.3}),$table.find("input").prop("disabled",!0))},updateTitleProperty:function(property,value){var $title=_ibThis.find("#share_widget_title");switch(property=property.replace("_","-")){case"text":$title.text(value);break;case"text-transform":case"font-weight":case"font-style":case"text-decoration":case"font-family":$title.css(property,value);break;default:property.indexOf("color")!=-1?value="#"+value:value+="px",$title.css(property,value)}},handleNetworkClicked:function($checkbox){var network=$checkbox.data("network"),$widgetIcon=_shareWidget.find('a[data-id="'+network+'"]');$checkbox.prop("checked")?$widgetIcon.fadeIn():$widgetIcon.fadeOut()},updateSocialWidgetSettings:function(field,value){var post={action:"ib_manage_social_share_widget",nonce:ibKwAjax.ibKwNonce};post.data={},post.data[field]=value,$.ajax({url:ibKwAjax.ajaxurl,dataType:"json",type:"post",data:post,success:function(responseText,status){1==!responseText.type&&$.alert({title:a_title,content:responseText.message,confirmButtonClass:"ib_save"})},error:function(jqXhr,textStatus,errorThrown){console.log(errorThrown)}})}},settings=$.extend({},defaults,options);return this.each(function(){_ibThis=$(this),methods.init()})}}(jQuery);