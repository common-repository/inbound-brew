!function($){$.fn.ib_emailsLists=function(method){var _ibThis,_listOptions,_jconfirm,defaults={data:"",list:"emails",spinner:'<span class="fa fa-spinner fa-pulse fa-2x"></span>',post_type:"",blog_url:"",nonce:"",contact_forms:[],linked_contact_forms_title:"Linked Contact Forms"},methods={init:function(options){switch(settings.list){case"templates":_ibThis.find(".ib_data-tables").DataTable({columnDefs:[{orderable:!1,targets:[3]}],order:[[3,"desc"]],pageLength:25,asStripeClasses:[]}),$(".delete-template").each(function(){$(this).click(function(e){e.preventDefault(),methods.deleteTemplateConfirm($(this))})});break;case"emails":_ibThis.find(".ib_data-tables").DataTable(dtConfig),_ibThis.find(".ib_delete-email").each(function(){$(this).click(function(e){var $me=$(this);e.preventDefault(),$.confirm({title:"Delete CTA?",content:"Are you sure you want to delete this Email. This will also remove any linkages to contact forms.",confirm:function(){window.location.href=$me.attr("href")},cancel:function(){_lockClick=!1},confirmButton:"DELETE",cancelButton:"CANCEL",confirmButtonClass:"ib_save",cancelButtonClass:"ib_cancel"})})}),_ibThis.find(".ib_linked-forms").each(function(){$(this).click(function(e){e.preventDefault(),methods.showLinkedForms($(this))})})}_ibThis.find(".ib_preview").each(function(){$(this).click(function(e){e.preventDefault(),methods.quickPreview($(this))})}),_listOptions=$("#ib_list_options"),_listOptions.on("mouseover",function(){$(this).find("ul").stop().slideDown()}),$(document).on("mousedown",function(){_listOptions.find("ul").stop().slideUp()}),_listOptions.find("li").click(function(){var href=$(this).data("href");window.location.href=href})},showLinkedForms:function($link){forms=settings.contact_forms["email_"+$link.data("email")];var content="<p>This email is linked to the following contact form(s): </p>";for(var i in forms){var form=forms[i];content+='<p><a href="admin.php?page=ib-contact-forms&section=edit&cf_id='+i+'">'+form.post_title+" &raquo;<a></p>"}$.alert({title:settings.linked_contact_forms_title,content:content,confirmButtonClass:"ib_save"})},quickPreview:function($previewButton){var href=$previewButton.attr("href");href+="&nonce="+settings.nonce;var content='<iframe width="100%" src="'+href+'" id="email-quick-preview"></iframe>';_jconfirm=$.alert({title:$previewButton.data("title"),content:content,confirmButton:"CLOSE",confirmButtonClass:"ib_save",columnClass:"ib-template-preview-float",icon:"fa fa-eye",onOpen:function(){$("#email-quick-preview").on("load",function(){var $me=$(this),$body=$me.contents().find("body");if($body.length){var height=parseFloat($body.outerHeight())+20;$me.attr("height",height+"px")}methods.recenterModal()})}})},deleteTemplateConfirm:function($delete_button){$.confirm({title:"Delete Template?",content:"Are you sure you want to delete this template? This will also delete ALL Emails associated with it.",confirm:function(){window.location.href=$delete_button.attr("href")},cancel:function(){_lockClick=!1},confirmButton:"DELETE",cancelButton:"CANCEL",confirmButtonClass:"ib_save",cancelButtonClass:"ib_cancel"})},recenterModal:function(){_jconfirm.setDialogCenter()}},settings=$.extend({},defaults,method);return methods[method]?(_ibThis=$(this),methods[method].apply(this,Array.prototype.slice.call(arguments,1))):"object"!=typeof method&&method?void $.error("Method "+method+" does not exist on jQuery.ib_ctaLists"):this.each(function(){_ibThis=$(this),methods.init()})}}(jQuery);