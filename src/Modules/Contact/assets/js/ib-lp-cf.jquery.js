!function($){function toggleThankYouStatus(type){switch(type){case"redirect":$("#thank_you_redirect").prop("disabled",!1),$("#thank_you_message").prop("disabled",!0);break;case"message":$("#thank_you_redirect").prop("disabled",!0),$("#thank_you_message").prop("disabled",!1)}}$.fn.selectContactForm=function(options){var _this,defaults={download_input:"#download_content",email_input:"#template-",expire_input:"#expires_after",limit_input:"#download_limit",limit_input:"#download_limit",thankyou_message_input:"#thank_you_message",thankyou_redirect_input:"#thank_you_redirect"},methods={init:function(){_this.on("click",function(){var id=$(this).attr("id").replace("form-","");methods.retrieveFormData(id)})},retrieveFormData:function(id){$.ajax({method:"POST",data:{form_id:id,action:"get_contact_form_data"},url:ibAjax.ajaxurl,success:function(data){var obj=$.parseJSON(data);$(settings.download_input).val(obj.download_content);var templates=obj.email_template;$("#ib_email_templates input").each(function(){var $me=$(this),template_id=$me.attr("value"),checked=!1;if(templates.length)for(var i in templates)if(templates[i]==template_id){checked=!0;break}$me.prop("checked",checked)}),$(settings.expire_input).val(obj.expires_after),$(settings.limit_input).val(obj.download_limit),$(settings.limit_input).val(obj.download_limit);var message=void 0!=obj.thank_you_message?obj.thank_you_message:"";$(settings.thankyou_message_input).val(message);var redirect=void 0!=obj.thank_you_redirect?obj.thank_you_redirect:"";$(settings.thankyou_redirect_input).val(redirect);var selected_option=void 0!=obj.thank_you_option?obj.thank_you_option:"message";$("#ib_thank_you_option_"+selected_option).prop("checked",!0),toggleThankYouStatus(selected_option)},error:function(error){}})}},settings=$.extend({},defaults,options);return this.each(function(){_this=$(this),methods.init()})},$(document).ready(function(){function toggleNoEmail(){$noEmail.is(":checked")?$ibEmailTemplates.slideUp():$ibEmailTemplates.slideDown()}$(".ib-form-option").selectContactForm(),$(".ib-link").on("click",function(e){var id=$(this).data("role");$("#details-"+id).toggle("slow",function(){})});var $noEmail=$("#ib_dont_send_email"),$ibEmailTemplates=$("#ib_email_templates");toggleNoEmail(),$noEmail.click(function(){toggleNoEmail()});var file_frame;$("#upload_download_content").click(function(e){e.preventDefault(),file_frame&&file_frame.open(),file_frame=wp.media.frames.file_frame=wp.media({title:"Select Downloadable Content",button:{text:"Add"},multiple:!1}),file_frame.on("select",function(){attachment=file_frame.state().get("selection").first().toJSON();var imgurl=attachment.url;$("#download_content").val(imgurl)}),file_frame.open()});var $allowDownload=$("#ib_allow-download");$allowDownload.click(function(){var $me=$(this);$me.is(":checked")?$("#ib_download_settings").slideDown():$("#ib_download_settings").slideUp()});var $thankYouOptionRedirect=$("#ib_thank_you_option_redirect");$thankYouOptionRedirect.click(function(){toggleThankYouStatus("redirect")}),$thankYouOptionRedirect.is(":checked")&&toggleThankYouStatus("redirect");var $thankYouOptionMessage=$("#ib_thank_you_option_message");$thankYouOptionMessage.click(function(){toggleThankYouStatus("message")}),$thankYouOptionMessage.is(":checked")&&toggleThankYouStatus("message")})}(jQuery);