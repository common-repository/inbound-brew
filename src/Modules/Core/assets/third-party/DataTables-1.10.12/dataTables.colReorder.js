!function(factory){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function($){return factory($,window,document)}):"object"==typeof exports?module.exports=function(root,$){return root||(root=window),$&&$.fn.dataTable||($=require("datatables.net")(root,$).$),factory($,root,root.document)}:factory(jQuery,window,document)}(function($,window,document,undefined){"use strict";function fnInvertKeyValues(aIn){for(var aRet=[],i=0,iLen=aIn.length;i<iLen;i++)aRet[aIn[i]]=i;return aRet}function fnArraySwitch(aArray,iFrom,iTo){var mStore=aArray.splice(iFrom,1)[0];aArray.splice(iTo,0,mStore)}function fnDomSwitch(nParent,iFrom,iTo){for(var anTags=[],i=0,iLen=nParent.childNodes.length;i<iLen;i++)1==nParent.childNodes[i].nodeType&&anTags.push(nParent.childNodes[i]);var nStore=anTags[iFrom];null!==iTo?nParent.insertBefore(nStore,anTags[iTo]):nParent.appendChild(nStore)}var DataTable=$.fn.dataTable;$.fn.dataTableExt.oApi.fnColReorder=function(oSettings,iFrom,iTo,drop,invalidateRows){var i,iLen,j,jLen,jen,nTrs,oCol,iCols=oSettings.aoColumns.length,attrMap=function(obj,prop,mapping){if(obj[prop]&&"function"!=typeof obj[prop]){var a=obj[prop].split("."),num=a.shift();isNaN(1*num)||(obj[prop]=mapping[1*num]+"."+a.join("."))}};if(iFrom!=iTo){if(iFrom<0||iFrom>=iCols)return void this.oApi._fnLog(oSettings,1,"ColReorder 'from' index is out of bounds: "+iFrom);if(iTo<0||iTo>=iCols)return void this.oApi._fnLog(oSettings,1,"ColReorder 'to' index is out of bounds: "+iTo);var aiMapping=[];for(i=0,iLen=iCols;i<iLen;i++)aiMapping[i]=i;fnArraySwitch(aiMapping,iFrom,iTo);var aiInvertMapping=fnInvertKeyValues(aiMapping);for(i=0,iLen=oSettings.aaSorting.length;i<iLen;i++)oSettings.aaSorting[i][0]=aiInvertMapping[oSettings.aaSorting[i][0]];if(null!==oSettings.aaSortingFixed)for(i=0,iLen=oSettings.aaSortingFixed.length;i<iLen;i++)oSettings.aaSortingFixed[i][0]=aiInvertMapping[oSettings.aaSortingFixed[i][0]];for(i=0,iLen=iCols;i<iLen;i++){for(oCol=oSettings.aoColumns[i],j=0,jLen=oCol.aDataSort.length;j<jLen;j++)oCol.aDataSort[j]=aiInvertMapping[oCol.aDataSort[j]];oCol.idx=aiInvertMapping[oCol.idx]}for($.each(oSettings.aLastSort,function(i,val){oSettings.aLastSort[i].src=aiInvertMapping[val.src]}),i=0,iLen=iCols;i<iLen;i++)oCol=oSettings.aoColumns[i],"number"==typeof oCol.mData?oCol.mData=aiInvertMapping[oCol.mData]:$.isPlainObject(oCol.mData)&&(attrMap(oCol.mData,"_",aiInvertMapping),attrMap(oCol.mData,"filter",aiInvertMapping),attrMap(oCol.mData,"sort",aiInvertMapping),attrMap(oCol.mData,"type",aiInvertMapping));if(oSettings.aoColumns[iFrom].bVisible){var iVisibleIndex=this.oApi._fnColumnIndexToVisible(oSettings,iFrom),iInsertBeforeIndex=null;for(i=iTo<iFrom?iTo:iTo+1;null===iInsertBeforeIndex&&i<iCols;)iInsertBeforeIndex=this.oApi._fnColumnIndexToVisible(oSettings,i),i++;for(nTrs=oSettings.nTHead.getElementsByTagName("tr"),i=0,iLen=nTrs.length;i<iLen;i++)fnDomSwitch(nTrs[i],iVisibleIndex,iInsertBeforeIndex);if(null!==oSettings.nTFoot)for(nTrs=oSettings.nTFoot.getElementsByTagName("tr"),i=0,iLen=nTrs.length;i<iLen;i++)fnDomSwitch(nTrs[i],iVisibleIndex,iInsertBeforeIndex);for(i=0,iLen=oSettings.aoData.length;i<iLen;i++)null!==oSettings.aoData[i].nTr&&fnDomSwitch(oSettings.aoData[i].nTr,iVisibleIndex,iInsertBeforeIndex)}for(fnArraySwitch(oSettings.aoColumns,iFrom,iTo),i=0,iLen=iCols;i<iLen;i++)oSettings.oApi._fnColumnOptions(oSettings,i,{});for(fnArraySwitch(oSettings.aoPreSearchCols,iFrom,iTo),i=0,iLen=oSettings.aoData.length;i<iLen;i++){var data=oSettings.aoData[i],cells=data.anCells;if(cells)for(fnArraySwitch(cells,iFrom,iTo),j=0,jen=cells.length;j<jen;j++)cells[j]&&cells[j]._DT_CellIndex&&(cells[j]._DT_CellIndex.column=j);"dom"!==data.src&&$.isArray(data._aData)&&fnArraySwitch(data._aData,iFrom,iTo)}for(i=0,iLen=oSettings.aoHeader.length;i<iLen;i++)fnArraySwitch(oSettings.aoHeader[i],iFrom,iTo);if(null!==oSettings.aoFooter)for(i=0,iLen=oSettings.aoFooter.length;i<iLen;i++)fnArraySwitch(oSettings.aoFooter[i],iFrom,iTo);for((invalidateRows||invalidateRows===undefined)&&$.fn.dataTable.Api(oSettings).rows().invalidate(),i=0,iLen=iCols;i<iLen;i++)$(oSettings.aoColumns[i].nTh).off("click.DT"),this.oApi._fnSortAttachListener(oSettings,oSettings.aoColumns[i].nTh,i);$(oSettings.oInstance).trigger("column-reorder.dt",[oSettings,{from:iFrom,to:iTo,mapping:aiInvertMapping,drop:drop,iFrom:iFrom,iTo:iTo,aiInvertMapping:aiInvertMapping}])}};var ColReorder=function(dt,opts){var settings=new $.fn.dataTable.Api(dt).settings()[0];if(settings._colReorder)return settings._colReorder;opts===!0&&(opts={});var camelToHungarian=$.fn.dataTable.camelToHungarian;return camelToHungarian&&(camelToHungarian(ColReorder.defaults,ColReorder.defaults,!0),camelToHungarian(ColReorder.defaults,opts||{})),this.s={dt:null,init:$.extend(!0,{},ColReorder.defaults,opts),fixed:0,fixedRight:0,reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.dt=settings,this.s.dt._colReorder=this,this._fnConstruct(),this};return $.extend(ColReorder.prototype,{fnReset:function(){return this._fnOrderColumns(this.fnOrder()),this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(set,original){var i,ien,a=[],columns=this.s.dt.aoColumns;if(set===undefined){for(i=0,ien=columns.length;i<ien;i++)a.push(columns[i]._ColReorder_iOrigCol);return a}if(original){var order=this.fnOrder();for(i=0,ien=set.length;i<ien;i++)a.push($.inArray(set[i],order));set=a}return this._fnOrderColumns(fnInvertKeyValues(set)),this},fnTranspose:function(idx,dir){dir||(dir="toCurrent");var order=this.fnOrder(),columns=this.s.dt.aoColumns;return"toCurrent"===dir?$.isArray(idx)?$.map(idx,function(index){return $.inArray(index,order)}):$.inArray(idx,order):$.isArray(idx)?$.map(idx,function(index){return columns[index]._ColReorder_iOrigCol}):columns[idx]._ColReorder_iOrigCol},_fnConstruct:function(){var i,that=this,iLen=this.s.dt.aoColumns.length,table=this.s.dt.nTable;for(this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),this.s.init.iFixedColumnsLeft&&(this.s.fixed=this.s.init.iFixedColumnsLeft),this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0,this.s.init.fnReorderCallback&&(this.s.reorderCallback=this.s.init.fnReorderCallback),i=0;i<iLen;i++)i>this.s.fixed-1&&i<iLen-this.s.fixedRight&&this._fnMouseListener(i,this.s.dt.aoColumns[i].nTh),this.s.dt.aoColumns[i]._ColReorder_iOrigCol=i;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(oS,oData){that._fnStateSave.call(that,oData)},"ColReorder_State");var aiOrder=null;if(this.s.init.aiOrder&&(aiOrder=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(aiOrder=this.s.dt.oLoadedState.ColReorder),aiOrder)if(that.s.dt._bInitComplete){var resort=fnInvertKeyValues(aiOrder);that._fnOrderColumns.call(that,resort)}else{var bDone=!1;$(table).on("draw.dt.colReorder",function(){if(!that.s.dt._bInitComplete&&!bDone){bDone=!0;var resort=fnInvertKeyValues(aiOrder);that._fnOrderColumns.call(that,resort)}})}else this._fnSetColumnIndexes();$(table).on("destroy.dt.colReorder",function(){$(table).off("destroy.dt.colReorder draw.dt.colReorder"),$(that.s.dt.nTHead).find("*").off(".ColReorder"),$.each(that.s.dt.aoColumns,function(i,column){$(column.nTh).removeAttr("data-column-index")}),that.s.dt._colReorder=null,that.s=null})},_fnOrderColumns:function(a){var changed=!1;if(a.length!=this.s.dt.aoColumns.length)return void this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");for(var i=0,iLen=a.length;i<iLen;i++){var currIndex=$.inArray(i,a);i!=currIndex&&(fnArraySwitch(a,currIndex,i),this.s.dt.oInstance.fnColReorder(currIndex,i,!0,!1),changed=!0)}$.fn.dataTable.Api(this.s.dt).rows().invalidate(),this._fnSetColumnIndexes(),changed&&(""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnStateSave:function(oState){var i,iLen,iOrigColumn,oSettings=this.s.dt,columns=oSettings.aoColumns;if(oState.ColReorder=[],oState.aaSorting){for(i=0;i<oState.aaSorting.length;i++)oState.aaSorting[i][0]=columns[oState.aaSorting[i][0]]._ColReorder_iOrigCol;var aSearchCopy=$.extend(!0,[],oState.aoSearchCols);for(i=0,iLen=columns.length;i<iLen;i++)iOrigColumn=columns[i]._ColReorder_iOrigCol,oState.aoSearchCols[iOrigColumn]=aSearchCopy[i],oState.abVisCols[iOrigColumn]=columns[i].bVisible,oState.ColReorder.push(iOrigColumn)}else if(oState.order){for(i=0;i<oState.order.length;i++)oState.order[i][0]=columns[oState.order[i][0]]._ColReorder_iOrigCol;var stateColumnsCopy=$.extend(!0,[],oState.columns);for(i=0,iLen=columns.length;i<iLen;i++)iOrigColumn=columns[i]._ColReorder_iOrigCol,oState.columns[iOrigColumn]=stateColumnsCopy[i],oState.ColReorder.push(iOrigColumn)}},_fnMouseListener:function(i,nTh){var that=this;$(nTh).on("mousedown.ColReorder",function(e){e.preventDefault(),that._fnMouseDown.call(that,e,nTh)})},_fnMouseDown:function(e,nTh){var that=this,target=$(e.target).closest("th, td"),offset=target.offset(),idx=parseInt($(nTh).attr("data-column-index"),10);idx!==undefined&&(this.s.mouse.startX=e.pageX,this.s.mouse.startY=e.pageY,this.s.mouse.offsetX=e.pageX-offset.left,this.s.mouse.offsetY=e.pageY-offset.top,this.s.mouse.target=this.s.dt.aoColumns[idx].nTh,this.s.mouse.targetIndex=idx,this.s.mouse.fromIndex=idx,this._fnRegions(),$(document).on("mousemove.ColReorder",function(e){that._fnMouseMove.call(that,e)}).on("mouseup.ColReorder",function(e){that._fnMouseUp.call(that,e)}))},_fnMouseMove:function(e){if(null===this.dom.drag){if(Math.pow(Math.pow(e.pageX-this.s.mouse.startX,2)+Math.pow(e.pageY-this.s.mouse.startY,2),.5)<5)return;this._fnCreateDragNode()}this.dom.drag.css({left:e.pageX-this.s.mouse.offsetX,top:e.pageY-this.s.mouse.offsetY});for(var bSet=!1,lastToIndex=this.s.mouse.toIndex,i=1,iLen=this.s.aoTargets.length;i<iLen;i++)if(e.pageX<this.s.aoTargets[i-1].x+(this.s.aoTargets[i].x-this.s.aoTargets[i-1].x)/2){this.dom.pointer.css("left",this.s.aoTargets[i-1].x),this.s.mouse.toIndex=this.s.aoTargets[i-1].to,bSet=!0;break}bSet||(this.dom.pointer.css("left",this.s.aoTargets[this.s.aoTargets.length-1].x),this.s.mouse.toIndex=this.s.aoTargets[this.s.aoTargets.length-1].to),this.s.init.bRealtime&&lastToIndex!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!1),this.s.mouse.fromIndex=this.s.mouse.toIndex,this._fnRegions())},_fnMouseUp:function(e){$(document).off("mousemove.ColReorder mouseup.ColReorder"),null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!0),this._fnSetColumnIndexes(),""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnRegions:function(){var aoColumns=this.s.dt.aoColumns;this.s.aoTargets.splice(0,this.s.aoTargets.length),this.s.aoTargets.push({x:$(this.s.dt.nTable).offset().left,to:0});for(var iToPoint=0,total=this.s.aoTargets[0].x,i=0,iLen=aoColumns.length;i<iLen;i++)i!=this.s.mouse.fromIndex&&iToPoint++,aoColumns[i].bVisible&&"none"!==aoColumns[i].nTh.style.display&&(total+=$(aoColumns[i].nTh).outerWidth(),this.s.aoTargets.push({x:total,to:iToPoint}));0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight),0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var scrolling=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,origCell=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,origTr=origCell.parentNode,origThead=origTr.parentNode,origTable=origThead.parentNode,cloneCell=$(origCell).clone();this.dom.drag=$(origTable.cloneNode(!1)).addClass("DTCR_clonedTable").append($(origThead.cloneNode(!1)).append($(origTr.cloneNode(!1)).append(cloneCell[0]))).css({position:"absolute",top:0,left:0,width:$(origCell).outerWidth(),height:$(origCell).outerHeight()}).appendTo("body"),this.dom.pointer=$("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:scrolling?$("div.dataTables_scroll",this.s.dt.nTableWrapper).offset().top:$(this.s.dt.nTable).offset().top,height:scrolling?$("div.dataTables_scroll",this.s.dt.nTableWrapper).height():$(this.s.dt.nTable).height()}).appendTo("body")},_fnSetColumnIndexes:function(){$.each(this.s.dt.aoColumns,function(i,column){$(column.nTh).attr("data-column-index",i)})}}),ColReorder.defaults={aiOrder:null,bRealtime:!0,iFixedColumnsLeft:0,iFixedColumnsRight:0,fnReorderCallback:null},ColReorder.version="1.3.2",$.fn.dataTable.ColReorder=ColReorder,$.fn.DataTable.ColReorder=ColReorder,"function"==typeof $.fn.dataTable&&"function"==typeof $.fn.dataTableExt.fnVersionCheck&&$.fn.dataTableExt.fnVersionCheck("1.10.8")?$.fn.dataTableExt.aoFeatures.push({fnInit:function(settings){var table=settings.oInstance;if(settings._colReorder)table.oApi._fnLog(settings,1,"ColReorder attempted to initialise twice. Ignoring second");else{var dtInit=settings.oInit,opts=dtInit.colReorder||dtInit.oColReorder||{};new ColReorder(settings,opts)}return null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.10.8 or greater - www.datatables.net/download"),$(document).on("preInit.dt.colReorder",function(e,settings){if("dt"===e.namespace){var init=settings.oInit.colReorder,defaults=DataTable.defaults.colReorder;if(init||defaults){var opts=$.extend({},init,defaults);init!==!1&&new ColReorder(settings,opts)}}}),$.fn.dataTable.Api.register("colReorder.reset()",function(){return this.iterator("table",function(ctx){ctx._colReorder.fnReset()})}),$.fn.dataTable.Api.register("colReorder.order()",function(set,original){return set?this.iterator("table",function(ctx){ctx._colReorder.fnOrder(set,original)}):this.context.length?this.context[0]._colReorder.fnOrder():null}),$.fn.dataTable.Api.register("colReorder.transpose()",function(idx,dir){return this.context.length&&this.context[0]._colReorder?this.context[0]._colReorder.fnTranspose(idx,dir):idx}),ColReorder});